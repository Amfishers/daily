(function(e){function t(t){for(var a,r,o=t[0],l=t[1],d=t[2],c=0,u=[];c<o.length;c++)r=o[c],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);h&&h(t);while(u.length)u.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},s={app:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var h=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},2237:function(e,t,n){"use strict";n("8506")},"480b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("7f6b");var a=n("8592"),s=(n("5704"),n("b558")),i=(n("3b18"),n("f64c")),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("b0c0"),n("2b0e")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("FlowPage")],1)},l=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowpage"},[n("div",{staticClass:"flowpage-sider"},[e._m(0),n("ul",{staticClass:"catalog-list"},[e.catalogLoading?n("a-spin"):e._l(e.catalogList,(function(t){return n("li",{key:t.id,staticClass:"catalog-item",class:{"catalog-item--current":t.id===e.currentId},on:{click:function(n){return e.handleCurrCatalog(t)}}},[n("p",{attrs:{title:t.name}},[e._v(e._s(t.name))])])}))],2)]),n("div",{staticClass:"flowpage-view"},[n("div",{staticClass:"flowpage-view__search"},[n("span",{staticClass:"outer-title"},[e._v(e._s(e.sourceData&&e.sourceData.title||""))]),n("a-input-search",{attrs:{placeholder:"请输入文件标题"},on:{search:e.handleSearch}}),e.isShowCollapseAll?n("span",{staticClass:"outer-collapse",on:{click:e.collapseAll}},[e._v("全部收起")]):e._e()],1),n("div",{staticClass:"flowpage-view__main"},[n("ProcessCatalog",{ref:"processcatalog",attrs:{loading:e.processLoading,viewWidth:e.viewWidth,sourceData:e.sourceData,empty:e.empty}})],1)])])},h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowpage-sider__header"},[n("p",[e._v("组织目录")])])}],c=n("1da1"),u=(n("96cf"),n("b64b"),n("99af"),n("498a"),n("5530")),p=n("53ca"),f=n("bc3a"),v=n.n(f);function g(e,t,n){return y.apply(this,arguments)}function y(){return y=Object(c["a"])(regeneratorRuntime.mark((function e(t,n,a){var s,i,r,o,l,d,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={500:"服务器繁忙或出错了，请稍后再试"},o={},o={method:t,url:n},Object.assign(o,a),l=m.getCustomHeader(),o.headers=o.headers||{},o.headers=Object(u["a"])(Object(u["a"])({},o.headers),l),e.prev=7,e.next=10,v()(o);case 10:d=e.sent,d.data||""===d.data?(h=d.data,""===h||"undefined"===typeof h.errors?i=h:r={status:200,userMessage:h.message,message:h.message,responseData:h}):r={status:200,userMessage:"服务器出了点问题，请稍后再试",message:"服务器返回非 JSON 格式",responseData:null},e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](7),r=e.t0.response&&e.t0.response.data?{status:e.t0.response.status,userMessage:e.t0.response.data.message,message:e.t0.response.data.message,responseData:e.t0.response.data}:e.t0.response&&!e.t0.response.data?{status:e.t0.response.status,userMessage:s[e.t0.response.status]||e.t0.response.statusText,message:s[e.t0.response.status]||e.t0.response.statusText,responseData:null}:{status:null,userMessage:"网络异常",message:e.t0.message,responseData:null},r.e=e.t0,r.stack=e.t0.stack?e.t0.stack:"no stack";case 19:if("undefined"===typeof i){e.next=23;break}return e.abrupt("return",i);case 23:throw r;case 24:case"end":return e.stop()}}),e,null,[[7,14]])}))),y.apply(this,arguments)}v.a.defaults.baseURL="/",v.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",v.a.defaults.withCredentials=!0;var m={get:function(e,t,n){var a={};return t&&"object"===Object(p["a"])(t.params)&&(a=Object(u["a"])(Object(u["a"])({},t.params),a)),g("get",e,Object(u["a"])(Object(u["a"])({},t),{},{params:a}),n)},post:function(e,t){return g("post",e,t)},delete:function(e,t){return g("delete",e,t)},put:function(e,t){return g("put",e,t)},patch:function(e,t){return g("patch",e,t)},resolveApi:function(e){return v.a.defaults.baseURL+e},getCustomHeader:function(){var e={};return e}},C=m,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"levelmain",staticClass:"gz-process",style:e.groupStyle},[n("div",{staticClass:"gz-process__main"},[n("div",{staticClass:"level-group__header"},[n("div",{staticClass:"level-group__header-wrap"},e._l(e.expandLevel,(function(t,a){return n("span",{key:a,staticClass:"level-group__header-item",class:{"flex-1":"file"===t.type}},[e._v(" "+e._s("file"===t.type?"末级流程":"L"+(a+1)+(t.totalLevel?"("+t.totalLevel+")":""))+" ")])})),0)]),n("div",{staticClass:"level-group__main"},e._l(e.levelData,(function(t){return n("div",{key:t.label,staticClass:"level-group",class:t.class},[n("div",{staticClass:"level-group-title"},[n("p",{staticClass:"level-group-title__text"},[e._v(e._s(t.label))])]),n("div",{staticClass:"level-group__view"},e._l(e.expandLevel,(function(e,t){return n("span",{key:t,staticClass:"level-group__line-item"})})),0),n("div",{staticClass:"group-item"},[e.loading||e.refresh?n("a-spin"):e.empty?n("div"):[n("VueOrgTree",{ref:t.type,refInFor:!0,attrs:{data:t.treeData,direction:"horizontal","show-collapsable":"","label-class-name":"process-item","render-content":e.renderContent,expandFileIndex:e.expandFileIndex,"parent-class-name":e.parentClassNameHandle},on:{"node-expand":function(n){return e.handleNodeExpand(arguments,t.type)},"node-collapse":function(n){return e.handleNodeCollapse(arguments,t.type)}}})]],2)])})),0)])])},b=[],x=n("2909"),w=(n("a9e3"),n("c740"),n("4de4"),n("a434"),n("159b"),n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"org-chart-container"},[n("div",{ref:"orgChartRoot",staticClass:"org-chart-node-children",class:{vertical:"vertical"===e.direction,horizontal:"horizontal"===e.direction,"show-collapsable":e.showCollapsable,"one-branch":1===e.data.length}},e._l(e.root.childNodes,(function(t){return n("OrgTreeNode",{key:e.getNodeKey(t),attrs:{node:t,root:e.root,orkstyle:"","show-collapsable":e.showCollapsable,"label-width":e.labelWidth,"label-height":e.labelHeight,renderContent:e.renderContent,nodeBtnContent:e.nodeBtnContent,"selected-key":e.selectedKey,"default-expand-all":e.defaultExpandAll,"node-key":e.nodeKey,"show-node-num":e.showNodeNum,props:e.props,expandFileIndex:e.expandFileIndex}})})),1)])}),L=[],k=function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return t.node.visible?a("div",{staticClass:"org-chart-node",class:t.computeParentClass,on:{contextmenu:function(t){return e.handleContextMenu(t)}}},[a("transition",{attrs:{duration:t.animateDuration,name:t.animateName}},[t.showLeftChildNode?a("div",{directives:[{name:"show",rawName:"v-show",value:t.node.leftExpanded,expression:"node.leftExpanded"}],staticClass:"org-chart-node-left-children",class:t.computeChildClass},t._l(t.leftChildNodes,(function(e){return a("OkrTreeNode",{key:t.getNodeKey(e),attrs:{"show-collapsable":t.showCollapsable,node:e,"label-width":t.labelWidth,"label-height":t.labelHeight,renderContent:t.renderContent,nodeBtnContent:t.nodeBtnContent,"selected-key":t.selectedKey,"node-key":t.nodeKey,props:t.props,"show-node-num":t.showNodeNum,expandFileIndex:t.expandFileIndex,"is-left-child-node":""}})})),1):t._e()]),a("div",{staticClass:"org-chart-node-label",class:{"is-root-label":1===t.node.level,"is-not-right-child":1===t.node.level&&t.node.childNodes.length<=0,"is-not-left-child":1===t.node.level&&t.leftChildNodes.length<=0}},[t.showNodeLeftBtn&&t.leftChildNodes.length>0?a("div",{staticClass:"org-chart-node-left-btn",class:{expanded:t.node.leftExpanded},on:{click:function(e){return t.handleBtnClick("left")}}},[t.showNodeNum?[t.node.leftExpanded?t._e():a("span",{staticClass:"org-chart-node-btn-text"},[t._v(" "+t._s(1===t.node.level&&t.leftChildNodes.length>0?t.leftChildNodes.length:t.node.childNodes.length)+" ")])]:a("node-btn-content",{attrs:{node:t.node}},[t._t("default")],2)],2):t._e(),a("div",{staticClass:"org-chart-node-label-inner",class:t.computeLabelClass,style:t.computeLabelStyle,on:{click:t.handleNodeClick}},[a("node-content",{attrs:{node:t.node}},[t._t("default",(function(){return[t._v(" "+t._s(t.node.label)+" ")]}))],2)],1),t.showNodeBtn&&!t.isLeftChildNode?a("div",{staticClass:"org-chart-node-btn",class:{expanded:t.node.expanded},on:{click:function(e){return t.handleBtnClick("right")}}},[t.showNodeNum?[t.node.expanded?t._e():a("span",{staticClass:"org-chart-node-btn-text"},[t._v(" "+t._s(t.node.childNodes.length)+" ")])]:a("node-btn-content",{attrs:{node:t.node}},[t._t("default")],2)],2):t._e()]),a("transition",{attrs:{duration:t.animateDuration,name:t.animateName}},[!t.isLeftChildNode&&t.node.childNodes&&t.node.childNodes.length>0?a("div",{directives:[{name:"show",rawName:"v-show",value:t.node.expanded,expression:"node.expanded"}],staticClass:"org-chart-node-children",class:t.computeChildClass},t._l(t.node.childNodes,(function(e){return a("OkrTreeNode",{key:t.getNodeKey(e),attrs:{"show-collapsable":t.showCollapsable,node:e,"label-width":t.labelWidth,"label-height":t.labelHeight,renderContent:t.renderContent,nodeBtnContent:t.nodeBtnContent,"selected-key":t.selectedKey,"node-key":t.nodeKey,"show-node-num":t.showNodeNum,props:t.props,expandFileIndex:t.expandFileIndex}})})),1):t._e()])],1):t._e()},_=[],E="$treeNodeId",D=function(e,t){t&&!t[E]&&Object.defineProperty(t,E,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},B=function(e,t){return e?t[e]:t[E]},O={name:"OkrTreeNode",inject:["okrEventBus"],props:{props:{},node:{default:function(){return{}}},root:{default:function(){return{}}},expandFileIndex:{type:Number,default:null},showCollapsable:{type:Boolean,default:!1},isLeftChildNode:{type:Boolean,default:!1},renderContent:Function,nodeBtnContent:Function,showNodeNum:Boolean,labelWidth:[String,Number],labelHeight:[String,Number],selectedKey:String,nodeKey:String},components:{NodeContent:{props:{node:{required:!0}},render:function(e){var t=this.$parent;return t._props.renderContent?t._props.renderContent(e,this.node):this.$scopedSlots.default(this.node)}},NodeBtnContent:{props:{node:{required:!0}},render:function(e){var t=this.$parent;return t._props.nodeBtnContent?t._props.nodeBtnContent(e,this.node):this.$scopedSlots.default?this.$scopedSlots.default(this.node):void 0}}},computed:{isLeaf:function(){return 1===this.node.level?0==this.leftChildNodes.length&&0==this.node.childNodes.length:this.node.isLeaf},leftChildNodes:function(){return this.tree.store.onlyBothTree?this.isLeftChildNode?this.node.childNodes:this.node.leftChildNodes:[]},animateName:function(){return this.tree.store.animate?this.tree.store.animateName:""},animateDuration:function(){return this.tree.store.animate?this.tree.store.animateDuration:0},showNodeBtn:function(){return this.isLeftChildNode?"horizontal"===this.tree.store.direction&&this.showCollapsable&&this.leftChildNodes.length>0||1===this.level:this.showCollapsable&&this.node.childNodes&&this.node.childNodes.length>0},showNodeLeftBtn:function(){return"horizontal"===this.tree.store.direction&&this.showCollapsable&&this.leftChildNodes.length>0},computeLabelStyle:function(){var e=this.labelWidth,t=void 0===e?"auto":e,n=this.labelHeight,a=void 0===n?"auto":n;return"number"===typeof t&&(t="".concat(t,"px")),"number"===typeof a&&(a="".concat(a,"px")),{width:t,height:a}},computeLabelClass:function(){var e=[],t=this.tree.store;return t.labelClassName&&("function"===typeof t.labelClassName?e.push(t.labelClassName(this.node)):e.push(t.labelClassName)),t.currentLableClassName&&this.node.isCurrent&&("function"===typeof t.currentLableClassName?e.push(t.currentLableClassName(this.node)):e.push(t.currentLableClassName)),this.node.isCurrent&&e.push("is-current"),e},computeChildClass:function(){var e=this.node.data;return"file"===e.childrenType&&null!==this.expandFileIndex&&void 0!==this.expandFileIndex&&this.expandFileIndex>e.level?"gz-process--diff-".concat(this.expandFileIndex-e.level):""},computeParentClass:function(){var e=[],t=this.tree.store;t.parentClassName&&("function"===typeof t.parentClassName?e.push(t.parentClassName(this.node)):e.push(t.parentClassName));var n={collapsed:!this.node.leftExpanded||!this.node.expanded,"is-leaf":this.isLeaf,"is-current":this.node.isCurrent,"is-left-child-node":this.isLeftChildNode,"is-not-child":1===this.node.level&&this.node.childNodes.length<=0&&this.leftChildNodes.length<=0,"only-both-tree-node":1===this.node.level&&this.tree.store.onlyBothTree};return e.length&&e.forEach((function(e){n[e]=!0})),n},computNodeStyle:function(){return{display:this.node.expanded?"":"none"}},computLeftNodeStyle:function(){return{display:this.node.leftExpanded?"":"none"}},showLeftChildNode:function(){return this.tree.onlyBothTree&&"horizontal"===this.tree.store.direction&&this.leftChildNodes&&this.leftChildNodes.length>0}},watch:{"node.expanded":function(e){},"node.leftExpanded":function(e){}},data:function(){return{expanded:!1,tree:null}},created:function(){var e=this.$parent;e.isTree?this.tree=e:this.tree=e.tree;var t=this.tree;t||console.warn("Can not find node's tree.")},methods:{getNodeKey:function(e){return B(this.nodeKey,e.data)},handleNodeClick:function(){var e=this.tree.store;e.setCurrentNode(this.node),this.tree.$emit("node-click",this.node.data,this.node,this)},handleBtnClick:function(e){e="left"===e;var t=this.tree.store;t.onlyBothTree&&e?this.node.leftExpanded?(this.node.leftExpanded=!1,this.tree.$emit("node-collapse",this.node.data,this.node,this)):(this.node.leftExpanded=!0,this.tree.$emit("node-expand",this.node.data,this.node,this)):this.node.expanded?(this.node.collapse(),this.tree.$emit("node-collapse",this.node.data,this.node,this)):(this.node.expand(),this.tree.$emit("node-expand",this.node.data,this.node,this))},handleContextMenu:function(e){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(e.stopPropagation(),e.preventDefault()),this.tree.$emit("node-contextmenu",e,this.node.data,this.node,this)}}},T=O,K=n("2877"),j=Object(K["a"])(T,k,_,!1,null,null,null),S=j.exports,$=n("d4ec"),M=n("bee2"),z=function(e){for(var t=1,n=arguments.length;t<n;t++){var a=arguments[t]||{};for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];void 0!==i&&(e[s]=i)}}return e},A=function(e,t){var n=e.store.props,a=e.data||{},s=n[t];if("function"===typeof s)return s(a,e);if("string"===typeof s)return a[s];if("undefined"===typeof s){var i=a[t];return void 0===i?"":i}},W=0,F=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var a in Object($["a"])(this,e),this.isLeftChild=n,this.id=W++,this.data=null,this.expanded=!1,this.leftExpanded=!1,this.isCurrent=!1,this.visible=!0,this.parent=null,t)t.hasOwnProperty(a)&&(this[a]=t[a]);this.level=0,this.childNodes=[],this.leftChildNodes=[],this.parent&&(this.level=this.parent.level+1);var s=this.store;if(!s)throw new Error("[Node]store is required!");if(s.registerNode(this),this.data&&(this.setData(this.data,n),!s.defaultExpandAll&&s.showCollapsable||(this.expanded=!0,this.leftExpanded=!0)),Array.isArray(this.data)||D(this,this.data),this.data){var i=s.defaultExpandedKeys,r=s.key;r&&i&&-1!==i.indexOf(this.key)&&this.expand(null,!0),r&&void 0!==s.currentNodeKey&&this.key===s.currentNodeKey&&(s.currentNode=this,s.currentNode.isCurrent=!0),this.updateLeafState()}}return Object(M["a"])(e,[{key:"setData",value:function(e,t){Array.isArray(e)||D(this,e);var n;this.store;this.data=e,this.childNodes=[],n=0===this.level&&this.data instanceof Array?this.data:A(this,"children")||[];for(var a=0,s=n.length;a<s;a++)this.insertChild({data:n[a]},null,null,t)}},{key:"key",get:function(){var e=this.store.key;return this.data?this.data[e]:null}},{key:"label",get:function(){return A(this,"label")}},{key:"hasLeftChild",value:function(){var e=this.store;return e.onlyBothTree&&"horizontal"===e.direction}},{key:"insertChild",value:function(t,n,a,s){if(!t)throw new Error("insertChild error: child is required.");if(!(t instanceof e)){if(!a){var i=this.getChildren(!0);-1===i.indexOf(t.data)&&("undefined"===typeof n||n<0?i.push(t.data):i.splice(n,0,t.data))}z(t,{parent:this,store:this.store}),t=new e(t,s)}t.level=this.level+1,void 0===n||null===n||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}},{key:"getChildren",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var t=this.data;if(!t)return null;var n=this.store.props,a="children";return n&&(a=n.children||"children"),void 0===t[a]&&(t[a]=null),e&&!t[a]&&(t[a]=[]),t[a]}},{key:"updateLeafState",value:function(){if(!0!==this.store.lazy||!0===this.loaded||"undefined"===typeof this.isLeafByUser){var e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser}},{key:"updateLeftLeafState",value:function(){if(!0!==this.store.lazy||!0===this.loaded||"undefined"===typeof this.isLeafByUser){var e=this.leftChildNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser}},{key:"collapse",value:function(){this.expanded=!1}},{key:"expand",value:function(e,t){var n=this,a=function(){if(t){var a=n.parent;while(a.level>0)a.isLeftChild?a.leftExpanded=!0:a.expanded=!0,a=a.parent}n.isLeftChild?n.leftExpanded=!0:n.expanded=!0,e&&e()};a()}},{key:"removeChild",value:function(e){var t=this.getChildren()||[],n=t.indexOf(e.data);n>-1&&t.splice(n,1);var a=this.childNodes.indexOf(e);a>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(a,1)),this.updateLeafState()}},{key:"insertBefore",value:function(e,t){var n;t&&(n=this.childNodes.indexOf(t)),this.insertChild(e,n)}},{key:"insertAfter",value:function(e,t){var n;t&&(n=this.childNodes.indexOf(t),-1!==n&&(n+=1)),this.insertChild(e,n)}}]),e}(),I=function(){function e(t){for(var n in Object($["a"])(this,e),this.currentNode=null,this.currentNodeKey=null,t)t.hasOwnProperty(n)&&(this[n]=t[n]);if(this.nodesMap={},this.root=new F({data:this.data,store:this},!1),this.root.store.onlyBothTree){if(!this.leftData)throw new Error("[Tree] leftData is required in onlyBothTree");this.leftData&&(this.isLeftChilds=new F({data:this.leftData,store:this},!0),this.isLeftChilds&&(this.root.childNodes[0].leftChildNodes=this.isLeftChilds.childNodes[0].childNodes,this.root.childNodes[0].leftExpanded=this.isLeftChilds.childNodes[0].leftExpanded))}}return Object(M["a"])(e,[{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"childNodes";this.filterRight(e,t)}},{key:"filterRight",value:function(e,t){var n=this.filterNodeMethod,a=function t(a,s){var i;if(i=a.root?a.root.childNodes[0][s]:a.childNodes,i.forEach((function(a){a.visible=n.call(a,e,a.data,a),t(a,s)})),!a.visible&&i.length){var r=!0;r=!i.some((function(e){return e.visible})),a.root?a.root.visible=!1===r:a.visible=!1===r}e&&a.visible&&a.expand()};a(this,t)}},{key:"registerNode",value:function(e){var t=this.key;if(t&&e&&e.data){var n=e.key;void 0!==n&&(this.nodesMap[e.key]=e)}}},{key:"deregisterNode",value:function(e){var t=this,n=this.key;n&&e&&e.data&&(e.childNodes.forEach((function(e){t.deregisterNode(e)})),delete this.nodesMap[e.key])}},{key:"setData",value:function(e){var t=e!==this.root.data;t?this.root.setData(e):this.root.updateChildren()}},{key:"updateChildren",value:function(e,t){var n=this.nodesMap[e];if(n){for(var a=n.childNodes,s=a.length-1;s>=0;s--){var i=a[s];this.remove(i.data)}for(var r=0,o=t.length;r<o;r++){var l=t[r];this.append(l,n.data)}}}},{key:"getNode",value:function(e){if(e instanceof F)return e;var t="object"!==Object(p["a"])(e)?e:B(this.key,e);return this.nodesMap[t]||null}},{key:"setDefaultExpandedKeys",value:function(e){var t=this;e=e||[],this.defaultExpandedKeys=e,e.forEach((function(e){var n=t.getNode(e);n&&n.expand(null,!0)}))}},{key:"setCurrentNode",value:function(e){var t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}},{key:"setUserCurrentNode",value:function(e){var t=e.key,n=this.nodesMap[t];this.setCurrentNode(n)}},{key:"setCurrentNodeKey",value:function(e){if(null===e||void 0===e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);var t=this.getNode(e);t&&this.setCurrentNode(t)}},{key:"getCurrentNode",value:function(){return this.currentNode}},{key:"remove",value:function(e){var t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}},{key:"append",value:function(e,t){var n=t?this.getNode(t):this.root;n&&n.insertChild({data:e})}},{key:"insertBefore",value:function(e,t){var n=this.getNode(t);n.parent.insertBefore({data:e},n)}},{key:"insertAfter",value:function(e,t){var n=this.getNode(t);n.parent.insertAfter({data:e},n)}}]),e}(),P={name:"OkrTree",components:{OrgTreeNode:S},provide:function(){return{okrEventBus:this.okrEventBus}},props:{data:{required:!0},leftData:{type:Array},direction:{type:String,default:"vertical"},showCollapsable:{type:Boolean,default:!1},onlyBothTree:{type:Boolean,default:!1},orkstyle:{type:Boolean,default:!1},renderContent:Function,nodeBtnContent:Function,showNodeNum:Boolean,labelWidth:[String,Number],labelHeight:[String,Number],labelClassName:[Function,String],childClassName:[Function,String],parentClassName:[Function,String],currentLableClassName:[Function,String],selectedKey:String,defaultExpandAll:{type:Boolean,default:!1},currentNodeKey:[String,Number],nodeKey:String,defaultExpandedKeys:{type:Array},filterNodeMethod:Function,props:{default:function(){return{leftChildren:"leftChildren",children:"children",label:"label",disabled:"disabled"}}},animate:{type:Boolean,default:!1},animateName:{type:String,default:"okr-zoom-in-center"},animateDuration:{type:Number,default:200},expandFileIndex:{type:Number,default:0}},computed:{ondeClass:function(){return{findNode:null}}},data:function(){return{okrEventBus:new r["a"],store:null,root:null}},created:function(){this.isTree=!0,this.store=new I({key:this.nodeKey,data:this.data,leftData:this.leftData,props:this.props,defaultExpandedKeys:this.defaultExpandedKeys,showCollapsable:this.showCollapsable,currentNodeKey:this.currentNodeKey,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod,labelClassName:this.labelClassName,childClassName:this.childClassName,parentClassName:this.parentClassName,currentLableClassName:this.currentLableClassName,onlyBothTree:this.onlyBothTree,direction:this.direction,animate:this.animate,animateName:this.animateName}),this.root=this.store.root},watch:{data:function(e){this.store.setData(e)},defaultExpandedKeys:function(e){this.store.defaultExpandedKeys=e,this.store.setDefaultExpandedKeys(e)}},methods:{filter:function(e){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(e),this.onlyBothTree&&this.store.filter(e,"leftChildNodes")},getNodeKey:function(e){return B(this.nodeKey,e.data)},setCurrentNode:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(e)},getNode:function(e){return this.store.getNode(e)},setCurrentKey:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(e)},remove:function(e){this.store.remove(e)},getCurrentNode:function(){var e=this.store.getCurrentNode();return e?e.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var e=this.getCurrentNode();return e?e[this.nodeKey]:null},append:function(e,t){this.store.append(e,t)},insertBefore:function(e,t){this.store.insertBefore(e,t)},insertAfter:function(e,t){this.store.insertAfter(e,t)},updateKeyChildren:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(e,t)}}},R=P,q=(n("959f"),Object(K["a"])(R,w,L,!1,null,null,null)),H=q.exports,U={name:"GZProcess",components:{VueOrgTree:H},props:{loading:{type:Boolean,default:!1},viewWidth:{type:Number,default:0},sourceData:{type:Object,default:function(){}},empty:{type:Boolean,default:!1}},data:function(){return{refresh:!1,levelList:[],contentMaxWidth:[0,0,0],windowwidth:null,expandLevel:[],levelData:[{label:"战略层",class:"style-strategy",type:"strategy",treeData:[]},{label:"经营层",class:"style-manage",type:"manage",treeData:[]},{label:"支撑层",class:"style-support",type:"support",treeData:[]}]}},watch:{sourceData:{immediate:!0,deep:!0,handler:function(e){this.handleData(e)}},viewWidth:{immediate:!0,handler:function(e){this.refreshWrapWidth(this,e)}}},computed:{levelLength:function(){return this.expandLevel.length},expandFileIndex:function(){return this.expandLevel&&this.expandLevel.findIndex((function(e){return"file"===e.type}))||null},childClassNameHandle:function(){var e=this.levelLength;return function(t){if("file"===t.data.childrenType){var n=e-t.data.level-1;return"gz-process--diff-".concat(n)}}},groupStyle:function(){return{width:this.windowwidth}}},methods:{debounce:function(e,t,n){var a;return function(){var s=this,i=arguments,r=function(){a=null,n||e.apply(s,i)},o=n&&!a;clearTimeout(a),a=setTimeout(r,t),o&&e.apply(s,i)}},renderContent:function(e,t){var n="_blank",a=function(e){return e?"流程"===t.data.processType?"process":"制度"===t.data.processType?"system":void 0:"none"},s=e("div",{class:"process-con-file"},[e("span",{class:"process-con-file-tag process-con-file-".concat(a(t.data.processType))},[t.data.processType]),e("a",{attrs:{href:t.data.href,target:n},class:"process-con-file-href"},[e("div",{class:"process-con-file-name"},[t.data.label])])]),i=e("div",{class:"process-con-name process-con-file-href"},[e("a",{attrs:{href:"/genzon/inst/#j_path=%2FdocCategory&cri.q=docStatus%3A30&docCategory=".concat(t.data.id),target:n},class:"process-con-file-name"},[t.data.label])]);return e("div",{class:"process-wrapper ".concat(t.isCurrent?"current-select":""," ").concat(1===t.data.level?"process-root":""," ").concat(2===t.data.level?"process-subroot":""," ").concat("file"===t.data.nodeType?"process-file":""),attrs:{title:t.data.label}},["file"===t.data.nodeType?s:i])},parentClassNameHandle:function(e){if(1===e.data.level)return"gz-process-root-node"},handleNodeExpand:function(e,t){e[0];var n=e[1],a=(e[2],this.handleExpandChild(this.expandLevel,n));a=a.filter((function(e){return!!e})),this.expandLevel=a,this.calcTreeWidth(t)},handleExpandChild:function(e,t){var n=this,a=e,s=t.childNodes.length,i=t.childNodes,r=t.data,o=r.level,l=(r.nodeType,r.childrenType),d=a[o];return"file"===l&&"file"===a[a.length-1].type&&(d=a[a.length-1]),d?d.type===l?"file"===l?a[a.length-1].expandNum+=s:"node"===l&&(a[o].expandNum+=s):("node"===d.type&&"file"===l&&("file"===a[a.length-1].type?a[a.length-1].expandNum+=s:a[a.length]={totalLevel:null,expandNum:s,type:l,level:a.length}),"file"===d.type&&"node"===l&&a.splice(o,0,{totalLevel:this.levelList[o],expandNum:s,type:l,level:o})):"node"===l?a[o]={totalLevel:this.levelList[o],expandNum:s,type:l,level:o}:"file"===l&&(a[a.length]={totalLevel:null,expandNum:s,type:l,level:a.length}),i&&i.length&&i.forEach((function(e){!e.isLeaf&&e.expanded&&(a=n.handleExpandChild(a,e))})),a},handleNodeCollapse:function(e,t){e[0];for(var n=e[1],a=(e[2],this.handleCollapseChild(this.expandLevel,n)),s=a.length-1;s>=0;s--){var i=a[s];if(i.expandNum)break;i.expandNum||a.splice(s,1)}for(var r=a.length-1;r>=0;r--){var o=a[r];o.expandNum||a.splice(r,1)}this.expandLevel=a,this.calcTreeWidth(t)},handleCollapseChild:function(e,t){var n=this,a=e,s=t.childNodes,i=t.data,r=(i.level,i.nodeType,i.childrenType);if("file"===r){var o=a[a.length-1];o.expandNum=o.expandNum-s.length<0?0:o.expandNum-s.length,a[a.length-1]=o}else"node"===r&&s&&s.length&&s.forEach((function(e){var t=e.level-1;a[t].expandNum=a[t].expandNum-1<0?0:a[t].expandNum-1,!e.isLeaf&&e.expanded&&(a=n.handleCollapseChild(a,e))}));return a},getwindowRect:function(){this.contentMaxWidth=[181,181,181],this.windowwidth="".concat(this.viewWidth||this.$el.clientWidth,"px")},calcTreeWidth:function(e){var t=this;setTimeout((function(){var e=t.$refs["strategy"]&&t.$refs["strategy"][0],n=t.$refs["manage"]&&t.$refs["manage"][0],a=t.$refs["support"]&&t.$refs["support"][0],s=e.$el.getBoundingClientRect().width,i=n.$el.getBoundingClientRect().width,r=a.$el.getBoundingClientRect().width;t.contentMaxWidth=[s,i,r],t.refreshWrapWidth(t,t.viewWidth)}),500)},refreshWrapWidth:function(e,t){var n,a=e,s=64;n=Math.max.apply(Math,Object(x["a"])(a.contentMaxWidth))+s,n<=t&&(n=t),a.windowwidth="".concat(n,"px")},collapseAll:function(){var e=this;this.refresh=!0,this.expandLevel=[{totalLevel:this.levelList[0],expandNum:this.levelList[0],type:"node",level:0}],this.getwindowRect(),this.$nextTick((function(){e.refresh=!1}))},handleData:function(e){if(e&&Object.keys(e).length){e.title;var t=e.supportLevel,n=e.strategicLevel,a=e.managementLevel,s=e.levels;this.levelList=s&&s.map((function(e){return e.count}))||[];var i=Object(x["a"])(this.levelData);i[0]["label"]=n.label||i[0]["label"],i[0]["treeData"]=n.treeData||[],i[1]["label"]=a.label||i[1]["label"],i[1]["treeData"]=a.treeData||[],i[2]["label"]=t.label||i[2]["label"],i[2]["treeData"]=t.treeData||[],this.levelData=i,this.expandLevel=[{totalLevel:this.levelList[0],expandNum:this.levelList[0],type:"node",level:0}]}}},mounted:function(){this.getwindowRect()}},J=U,V=(n("2237"),Object(K["a"])(J,N,b,!1,null,null,null)),X=V.exports,Z={components:{ProcessCatalog:X},data:function(){return{catalogList:[],currentId:"",processLoading:!1,catalogLoading:!1,viewWidth:0,sourceData:{},empty:!1,apiAddr:"/genzon/zd/api/genzonZdApi.do"}},computed:{isShowCollapseAll:function(){return!!this.sourceData&&(!!Object.keys(this.sourceData).length&&!!this.sourceData.levels.length)}},methods:{debounce:function(e,t,n){var a;return function(){var s=this,i=arguments,r=function(){a=null,n||e.apply(s,i)},o=n&&!a;clearTimeout(a),a=setTimeout(r,t),o&&e.apply(s,i)}},getInterface:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,n="";if(window.location.origin)n=window.location.origin;else{var a=window.location,s=a.protocol,i=a.host;n="".concat(s,"//").concat(i)}return n+t},initCatalogList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.processLoading=!0,e.catalogLoading=!0,n={method:"getLevels",parentId:null},t.prev=3,t.next=6,C.get(e.apiAddr,{params:n});case 6:if(a=t.sent,e.catalogList=a.levels||[],e.catalogLoading=!1,e.currentId){t.next=18;break}if(r=null===(s=e.catalogList)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.id,!r){t.next=17;break}return e.currentId=r,t.next=15,e.getProcessData();case 15:t.next=18;break;case 17:e.empty=!0;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](3),e.$message.error("数据加载失败，请重新刷新页面");case 23:e.processLoading=!1,e.catalogLoading=!1;case 25:case"end":return t.stop()}}),t,null,[[3,20]])})))()},getProcessData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.processLoading=!0,t.prev=1,n={method:"getLevels",parentId:e.currentId},t.next=5,C.get(e.apiAddr,{params:n});case 5:a=t.sent,e.sourceData=a,e.$nextTick((function(){e.processLoading=!1})),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$message.error("数据加载失败，请重新刷新页面");case 13:e.processLoading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},handleCurrCatalog:function(e){e.id!==this.currentId&&(this.currentId=e.id,this.getProcessData())},handleSearch:function(e){var t="/genzon/inst/#j_path=%2FallDoc&cri.q=docSubject%3A".concat(e.trim()),n=this.getInterface(t);self!==top?parent.location.href=n:location.href=n},collapseAll:function(){this.$refs.processcatalog.collapseAll()},mainPageResize:function(){var e=document.body.clientWidth,t=112,n=24;this.viewWidth=e-t-n},getParentUrl:function(){var e=null;if(parent!==window)try{e=parent.location.href}catch(t){e=document.referrer}return e}},mounted:function(){this.initCatalogList(),this.mainPageResize(),window.addEventListener("resize",this.debounce(this.mainPageResize,500));var e=this.getParentUrl();console.log("url",e)},beforeDestroy:function(){window.removeEventListener("resize",this.debounce(this.mainPageResize,500))}},G=Z,Q=(n("aeb8"),Object(K["a"])(G,d,h,!1,null,null,null)),Y=Q.exports,ee={name:"ProcessManage",components:{FlowPage:Y}},te=ee,ne=(n("034f"),Object(K["a"])(te,o,l,!1,null,null,null)),ae=ne.exports;r["a"].config.productionTip=!1,r["a"].use(i["a"]),r["a"].use(s["a"]),r["a"].component(a["a"].name,a["a"]),new r["a"]({render:function(e){return e(ae)}}).$mount("#app")},8506:function(e,t,n){},"85ec":function(e,t,n){},"959f":function(e,t,n){"use strict";n("480b")},aeb8:function(e,t,n){"use strict";n("d251")},d251:function(e,t,n){}});