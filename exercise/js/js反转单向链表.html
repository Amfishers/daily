<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js反转单向链表</title>
</head>

<body>
    <script>
        function createLinkList (arr) {
            if (!arr.length) throw new Error('Array is empty!')

            let head = {
                value: arr[0],
                next: null
            }

            let link = head

            for (let i = 1; i < arr.length; i++) {
                link.next = { value: arr[i], next: null }
                link = link.next
            }
            return head
        }

        var oldArr = [1, 2, 3, 4, 5]
        var newLink = createLinkList(oldArr)
        console.log(newLink)

        function reverseLinkList (linklist) {
            // 定义三个变量，分别指向前中后
            let prev, curr, next = linklist

            while (next) {
                // 如果没有前，只有中，那么就是第一个，也就是头
                // 倒过来就变成了链表的尾，所以删除next
                if (curr && !prev) {
                    delete curr.next
                }

                // 如果只有前和中，没有后，那就是最后一个
                // 倒过来就是链表的头
                if (curr && prev) {
                    curr.next = prev
                }

                prev = curr
                curr = next
                next = next?.next
            }

            // 最后一个的补充：当 next 空时，此时 curr 尚未设置 next
            curr.next = prev

            return curr
        }

        console.log('reverseLinkList', reverseLinkList(newLink))
    </script>
</body>

</html>